{"ast":null,"code":"import _taggedTemplateLiteral from\"D:\\\\React-Workspace\\\\Puzzle\\\\reactjs-challenge-marina\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";import _defineProperty from\"D:\\\\React-Workspace\\\\Puzzle\\\\reactjs-challenge-marina\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\React-Workspace\\\\Puzzle\\\\reactjs-challenge-marina\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n\\t\\t\",\"\\n\\t\"]);_templateObject=function _templateObject(){return data;};return data;}import{gql}from\"apollo-boost\";import{client,queries}from\"../../services/apollo\";import{CLEAR_COLLECTION,CLEAR_ERROR,CLEAR_INPUT,GET_COLLECTION_ERROR,GET_COLLECTION_PENDING,GET_COLLECTION_SUCCESS,SET_CURRENT_PAGE,SET_FILTER,SET_NAME,SET_TOTAL_PAGES,SET_TYPE}from\"./searcher.types\";export var setFilterAction=function setFilterAction(filter){return function(dispatch,getState){dispatch({type:SET_FILTER,payload:_defineProperty({activeFilter:filter},filter,_objectSpread(_objectSpread({},getState().searcher[filter]),{},{filterQuery:queries[filter]}))});};};export var setInputNameAction=function setInputNameAction(inputName){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:SET_NAME,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{inputName:inputName}))});};};export var setInputTypeAction=function setInputTypeAction(inputType){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:SET_TYPE,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{inputType:inputType}))});};};export var clearInputAction=function clearInputAction(){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:CLEAR_INPUT,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{inputName:\"\",inputType:\"\"}))});};};export var clearCollectionAction=function clearCollectionAction(){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:CLEAR_COLLECTION,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{collection:[]}))});dispatch(clearErrorAction());};};export var clearErrorAction=function clearErrorAction(){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:CLEAR_ERROR,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{error:false,fetching:false}))});};};export var setPageAction=function setPageAction(page){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:SET_CURRENT_PAGE,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{page:page}))});};};export var setTotalPagesAction=function setTotalPagesAction(pages){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;dispatch({type:SET_TOTAL_PAGES,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{fetching:false,totalPages:pages}))});};};export var getCollectionAction=function getCollectionAction(){return function(dispatch,getState){var activeFilter=getState().searcher.activeFilter;var _getState$searcher$ac=getState().searcher[activeFilter],filterQuery=_getState$searcher$ac.filterQuery,page=_getState$searcher$ac.page,inputName=_getState$searcher$ac.inputName,inputType=_getState$searcher$ac.inputType;var query=gql(_templateObject(),filterQuery);dispatch({type:GET_COLLECTION_PENDING,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{fetching:true}))});return client.query({query:query,variables:{name:inputName?inputName.toLowerCase():\"\",type:inputType?inputType.toLowerCase():\"\",page:page?page:1}}).then(function(_ref){var data=_ref.data;dispatch({type:GET_COLLECTION_SUCCESS,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{fetching:false,collection:data[activeFilter].results}))});dispatch(setTotalPagesAction(data[activeFilter].info.pages));}).catch(function(error){dispatch({type:GET_COLLECTION_ERROR,payload:_defineProperty({},activeFilter,_objectSpread(_objectSpread({},getState().searcher[activeFilter]),{},{error:true,fetching:false}))});});};};","map":{"version":3,"sources":["D:/React-Workspace/Puzzle/reactjs-challenge-marina/src/redux/searcher/searcher.actions.ts"],"names":["gql","client","queries","CLEAR_COLLECTION","CLEAR_ERROR","CLEAR_INPUT","GET_COLLECTION_ERROR","GET_COLLECTION_PENDING","GET_COLLECTION_SUCCESS","SET_CURRENT_PAGE","SET_FILTER","SET_NAME","SET_TOTAL_PAGES","SET_TYPE","setFilterAction","filter","dispatch","getState","type","payload","activeFilter","searcher","filterQuery","setInputNameAction","inputName","setInputTypeAction","inputType","clearInputAction","clearCollectionAction","collection","clearErrorAction","error","fetching","setPageAction","page","setTotalPagesAction","pages","totalPages","getCollectionAction","query","variables","name","toLowerCase","then","data","results","info","catch"],"mappings":"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","sourcesContent":["import { gql } from \"apollo-boost\";\r\nimport { client, queries } from \"../../services/apollo\";\r\nimport {\r\n\tAppThunk,\r\n\tCLEAR_COLLECTION,\r\n\tCLEAR_ERROR,\r\n\tCLEAR_INPUT,\r\n\tFilter,\r\n\tGET_COLLECTION_ERROR,\r\n\tGET_COLLECTION_PENDING,\r\n\tGET_COLLECTION_SUCCESS,\r\n\tSET_CURRENT_PAGE,\r\n\tSET_FILTER,\r\n\tSET_NAME,\r\n\tSET_TOTAL_PAGES,\r\n\tSET_TYPE,\r\n} from \"./searcher.types\";\r\n\r\nexport const setFilterAction: AppThunk = (filter: Filter) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tdispatch({\r\n\t\ttype: SET_FILTER,\r\n\t\tpayload: {\r\n\t\t\tactiveFilter: filter,\r\n\t\t\t[filter]: {\r\n\t\t\t\t...getState().searcher[filter],\r\n\t\t\t\tfilterQuery: queries[filter],\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const setInputNameAction: AppThunk = (inputName: string) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: SET_NAME,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tinputName,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const setInputTypeAction: AppThunk = (inputType: string) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: SET_TYPE,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tinputType,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const clearInputAction: AppThunk = () => (dispatch, getState) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: CLEAR_INPUT,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tinputName: \"\",\r\n\t\t\t\tinputType: \"\",\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const clearCollectionAction: AppThunk = () => (dispatch, getState) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: CLEAR_COLLECTION,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tcollection: [],\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\tdispatch(clearErrorAction());\r\n};\r\n\r\nexport const clearErrorAction: AppThunk = () => (dispatch, getState) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: CLEAR_ERROR,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\terror: false,\r\n\t\t\t\tfetching: false,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const setPageAction: AppThunk = (page: number) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: SET_CURRENT_PAGE,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tpage,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const setTotalPagesAction: AppThunk = (pages: number) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: SET_TOTAL_PAGES,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tfetching: false,\r\n\t\t\t\ttotalPages: pages,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const getCollectionAction: AppThunk = () => (dispatch, getState) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tconst { filterQuery, page, inputName, inputType } = getState().searcher[\r\n\t\tactiveFilter\r\n\t];\r\n\r\n\tconst query = gql`\r\n\t\t${filterQuery}\r\n\t`;\r\n\r\n\tdispatch({\r\n\t\ttype: GET_COLLECTION_PENDING,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\tfetching: true,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\treturn client\r\n\t\t.query({\r\n\t\t\tquery,\r\n\t\t\tvariables: {\r\n\t\t\t\tname: inputName ? inputName.toLowerCase() : \"\",\r\n\t\t\t\ttype: inputType ? inputType.toLowerCase() : \"\",\r\n\t\t\t\tpage: page ? page : 1,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(({ data }) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_COLLECTION_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t[activeFilter]: {\r\n\t\t\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\t\t\tfetching: false,\r\n\t\t\t\t\t\tcollection: data[activeFilter!].results,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tdispatch(setTotalPagesAction(data[activeFilter!].info.pages));\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_COLLECTION_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t[activeFilter]: {\r\n\t\t\t\t\t\t...getState().searcher[activeFilter],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\tfetching: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n};\r\n"]},"metadata":{},"sourceType":"module"}