{"ast":null,"code":"import ApolloClient, { gql } from \"apollo-boost\";\nimport { CLEAR_COLLECTION, CLEAR_ERROR, CLEAR_INPUT, Filter, GET_COLLECTION_ERROR, GET_COLLECTION_PENDING, GET_COLLECTION_SUCCESS, SET_CURRENT_PAGE, SET_FILTER, SET_NAME, SET_TOTAL_PAGES, SET_TYPE } from \"./reduxTypes\";\nlet client = new ApolloClient({\n  uri: \"https://rickandmortyapi.com/graphql\"\n}); // GraphQL Queries\n\nconst queries = {\n  [Filter.characters]: `\n        query($name:String,$type:String, $page:Int) {\n            characters(page:$page,filter:{name:$name, type:$type}){\n                info{\n                    pages\n                }\n                results{\n                    id\n                    name\n                    type\n                    species\n                    gender\n                    image\n                }\n            }\n        }`,\n  [Filter.locations]: `\n        query($name:String,$type:String, $page:Int) {\n            locations(page:$page,filter:{name:$name, type:$type}){\n                info{\n                    pages\n                }\n                results{\n                    id\n                    name\n                    dimension\n                    residents{\n                        name\n                        image\n                    }\n                }\n            }\n        }`,\n  [Filter.episodes]: `\n        query($name:String, $page:Int) {\n            episodes(page:$page,filter:{name:$name}){\n                info{\n                    pages\n                }\n                results{\n                    id\n                    name\n                    air_date\n                    episode\n                    characters{\n                    name\n                    image\n                    }\n                }\n            }\n        }`\n}; // STATES\n\nconst initialFilterState = {\n  collection: [],\n  inputType: \"\",\n  inputName: \"\",\n  fetching: false,\n  error: false,\n  page: 1,\n  totalPages: 0\n};\nconst initialData = {\n  activeFilter: Filter.characters,\n  [Filter.characters]: { ...initialFilterState,\n    filterQuery: queries.characters\n  },\n  [Filter.locations]: { ...initialFilterState,\n    filterQuery: queries.locations\n  },\n  [Filter.episodes]: { ...initialFilterState,\n    filterQuery: queries.episodes\n  }\n}; // REDUCER\n\nconst reducer = (state = initialData, action) => {\n  switch (action.type) {\n    case SET_FILTER:\n      return { ...state,\n        ...action.payload\n      };\n\n    case SET_NAME:\n      return { ...state,\n        inputName: action.payload\n      };\n\n    case SET_TYPE:\n      return { ...state,\n        inputType: action.payload\n      };\n\n    case CLEAR_INPUT:\n      return { ...state,\n        inputType: \"\",\n        inputName: \"\"\n      };\n\n    case CLEAR_COLLECTION:\n      return { ...state,\n        collection: {\n          [Filter.characters]: [],\n          [Filter.locations]: [],\n          [Filter.episodes]: []\n        },\n        totalPages: 0\n      };\n\n    case CLEAR_ERROR:\n      return { ...state,\n        error: false\n      };\n\n    case SET_TOTAL_PAGES:\n      return { ...state,\n        totalPages: action.payload\n      };\n\n    case SET_CURRENT_PAGE:\n      return { ...state,\n        page: action.payload\n      };\n\n    case GET_COLLECTION_PENDING:\n      return { ...state,\n        fetching: true\n      };\n\n    case GET_COLLECTION_SUCCESS:\n      return { ...state,\n        ...action.payload\n      };\n\n    case GET_COLLECTION_ERROR:\n      return { ...state,\n        fetching: false,\n        error: action.payload\n      };\n\n    default:\n      return action;\n  }\n}; // ACTIONS\n\n\nexport const setFilterAction = filterType => (dispatch, getState) => {\n  dispatch({\n    type: SET_FILTER,\n    payload: {\n      filter: filterType,\n      filterQuery: queries[filterType]\n    }\n  });\n  dispatch(clearInputAction());\n  dispatch(setPageAction(1));\n};\nexport const setInputNameAction = inputName => (dispatch, getState) => {\n  dispatch({\n    type: SET_NAME,\n    payload: inputName\n  });\n};\nexport const setInputTypeAction = inputType => (dispatch, getState) => {\n  dispatch({\n    type: SET_TYPE,\n    payload: inputType\n  });\n};\nexport const clearInputAction = () => (dispatch, getState) => {\n  dispatch({\n    type: CLEAR_INPUT\n  });\n};\nexport const clearCollectionAction = () => (dispatch, getState) => {\n  dispatch({\n    type: CLEAR_COLLECTION\n  });\n  dispatch(clearErrorAction());\n};\nexport const clearErrorAction = () => (dispatch, getState) => {\n  dispatch({\n    type: CLEAR_ERROR\n  });\n};\nexport const setPageAction = page => (dispatch, getState) => {\n  const {\n    activeFilter\n  } = getState().searcher;\n  dispatch({\n    type: SET_CURRENT_PAGE,\n    payload: {\n      [activeFilter]: { ...[activeFilter],\n        page\n      }\n    }\n  });\n};\nexport const getCollectionAction = () => (dispatch, getState) => {\n  const {\n    activeFilter\n  } = getState().searcher;\n  const {\n    filterQuery,\n    page,\n    inputName,\n    inputType,\n    collection\n  } = getState().searcher[activeFilter];\n  const query = gql`\n\t\t${filterQuery}\n\t`;\n  dispatch({\n    type: GET_COLLECTION_PENDING\n  });\n  return client.query({\n    query,\n    variables: {\n      name: inputName.toLowerCase(),\n      type: inputType.toLowerCase(),\n      page: page\n    }\n  }).then(({\n    data\n  }) => {\n    dispatch({\n      type: GET_COLLECTION_SUCCESS,\n      payload: {\n        fetching: false,\n        collection: { ...collection,\n          [activeFilter]: data[activeFilter].results\n        }\n      }\n    });\n    dispatch({\n      type: SET_TOTAL_PAGES,\n      payload: data[activeFilter].info.pages\n    });\n  }).catch(error => {\n    dispatch({\n      type: GET_COLLECTION_ERROR,\n      payload: error\n    });\n  });\n};\nexport default reducer;","map":{"version":3,"sources":["D:/React-Workspace/Puzzle/reactjs-challenge-marina/src/redux/searcherDuck.ts"],"names":["ApolloClient","gql","CLEAR_COLLECTION","CLEAR_ERROR","CLEAR_INPUT","Filter","GET_COLLECTION_ERROR","GET_COLLECTION_PENDING","GET_COLLECTION_SUCCESS","SET_CURRENT_PAGE","SET_FILTER","SET_NAME","SET_TOTAL_PAGES","SET_TYPE","client","uri","queries","characters","locations","episodes","initialFilterState","collection","inputType","inputName","fetching","error","page","totalPages","initialData","activeFilter","filterQuery","reducer","state","action","type","payload","setFilterAction","filterType","dispatch","getState","filter","clearInputAction","setPageAction","setInputNameAction","setInputTypeAction","clearCollectionAction","clearErrorAction","searcher","getCollectionAction","query","variables","name","toLowerCase","then","data","results","info","pages","catch"],"mappings":"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","sourcesContent":["import ApolloClient, { gql } from \"apollo-boost\";\r\nimport { Reducer } from \"redux\";\r\nimport {\r\n\tAppThunk,\r\n\tCLEAR_COLLECTION,\r\n\tCLEAR_ERROR,\r\n\tCLEAR_INPUT,\r\n\tFilter,\r\n\tFilterState,\r\n\tGET_COLLECTION_ERROR,\r\n\tGET_COLLECTION_PENDING,\r\n\tGET_COLLECTION_SUCCESS,\r\n\tSearcherActionTypes,\r\n\tSearcherState,\r\n\tSET_CURRENT_PAGE,\r\n\tSET_FILTER,\r\n\tSET_NAME,\r\n\tSET_TOTAL_PAGES,\r\n\tSET_TYPE,\r\n} from \"./reduxTypes\";\r\n\r\nlet client = new ApolloClient({\r\n\turi: \"https://rickandmortyapi.com/graphql\",\r\n});\r\n\r\n// GraphQL Queries\r\nconst queries = {\r\n\t[Filter.characters]: `\r\n        query($name:String,$type:String, $page:Int) {\r\n            characters(page:$page,filter:{name:$name, type:$type}){\r\n                info{\r\n                    pages\r\n                }\r\n                results{\r\n                    id\r\n                    name\r\n                    type\r\n                    species\r\n                    gender\r\n                    image\r\n                }\r\n            }\r\n        }`,\r\n\r\n\t[Filter.locations]: `\r\n        query($name:String,$type:String, $page:Int) {\r\n            locations(page:$page,filter:{name:$name, type:$type}){\r\n                info{\r\n                    pages\r\n                }\r\n                results{\r\n                    id\r\n                    name\r\n                    dimension\r\n                    residents{\r\n                        name\r\n                        image\r\n                    }\r\n                }\r\n            }\r\n        }`,\r\n\r\n\t[Filter.episodes]: `\r\n        query($name:String, $page:Int) {\r\n            episodes(page:$page,filter:{name:$name}){\r\n                info{\r\n                    pages\r\n                }\r\n                results{\r\n                    id\r\n                    name\r\n                    air_date\r\n                    episode\r\n                    characters{\r\n                    name\r\n                    image\r\n                    }\r\n                }\r\n            }\r\n        }`,\r\n};\r\n\r\n// STATES\r\nconst initialFilterState: FilterState = {\r\n\tcollection: [],\r\n\tinputType: \"\",\r\n\tinputName: \"\",\r\n\tfetching: false,\r\n\terror: false,\r\n\tpage: 1,\r\n\ttotalPages: 0,\r\n};\r\n\r\nconst initialData: SearcherState = {\r\n\tactiveFilter: Filter.characters,\r\n\t[Filter.characters]: {\r\n\t\t...initialFilterState,\r\n\t\tfilterQuery: queries.characters,\r\n\t},\r\n\t[Filter.locations]: {\r\n\t\t...initialFilterState,\r\n\t\tfilterQuery: queries.locations,\r\n\t},\r\n\t[Filter.episodes]: {\r\n\t\t...initialFilterState,\r\n\t\tfilterQuery: queries.episodes,\r\n\t},\r\n};\r\n\r\n// REDUCER\r\nconst reducer: Reducer<SearcherState> = (\r\n\tstate = initialData,\r\n\taction: SearcherActionTypes\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_FILTER:\r\n\t\t\treturn { ...state, ...action.payload };\r\n\t\tcase SET_NAME:\r\n\t\t\treturn { ...state, inputName: action.payload };\r\n\t\tcase SET_TYPE:\r\n\t\t\treturn { ...state, inputType: action.payload };\r\n\t\tcase CLEAR_INPUT:\r\n\t\t\treturn { ...state, inputType: \"\", inputName: \"\" };\r\n\t\tcase CLEAR_COLLECTION:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcollection: {\r\n\t\t\t\t\t[Filter.characters]: [],\r\n\t\t\t\t\t[Filter.locations]: [],\r\n\t\t\t\t\t[Filter.episodes]: [],\r\n\t\t\t\t},\r\n\t\t\t\ttotalPages: 0,\r\n\t\t\t};\r\n\t\tcase CLEAR_ERROR:\r\n\t\t\treturn { ...state, error: false };\r\n\t\tcase SET_TOTAL_PAGES:\r\n\t\t\treturn { ...state, totalPages: action.payload };\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn { ...state, page: action.payload };\r\n\t\tcase GET_COLLECTION_PENDING:\r\n\t\t\treturn { ...state, fetching: true };\r\n\t\tcase GET_COLLECTION_SUCCESS:\r\n\t\t\treturn { ...state, ...action.payload };\r\n\t\tcase GET_COLLECTION_ERROR:\r\n\t\t\treturn { ...state, fetching: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn action;\r\n\t}\r\n};\r\n\r\n// ACTIONS\r\nexport const setFilterAction: AppThunk = (filterType: Filter) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tdispatch({\r\n\t\ttype: SET_FILTER,\r\n\t\tpayload: {\r\n\t\t\tfilter: filterType,\r\n\t\t\tfilterQuery: queries[filterType as keyof typeof queries],\r\n\t\t},\r\n\t});\r\n\r\n\tdispatch(clearInputAction());\r\n\r\n\tdispatch(setPageAction(1));\r\n};\r\n\r\nexport const setInputNameAction: AppThunk = (inputName: string) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tdispatch({\r\n\t\ttype: SET_NAME,\r\n\t\tpayload: inputName,\r\n\t});\r\n};\r\n\r\nexport const setInputTypeAction: AppThunk = (inputType: string) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tdispatch({\r\n\t\ttype: SET_TYPE,\r\n\t\tpayload: inputType,\r\n\t});\r\n};\r\n\r\nexport const clearInputAction: AppThunk = () => (dispatch, getState) => {\r\n\tdispatch({\r\n\t\ttype: CLEAR_INPUT,\r\n\t});\r\n};\r\n\r\nexport const clearCollectionAction: AppThunk = () => (dispatch, getState) => {\r\n\tdispatch({\r\n\t\ttype: CLEAR_COLLECTION,\r\n\t});\r\n\r\n\tdispatch(clearErrorAction());\r\n};\r\n\r\nexport const clearErrorAction: AppThunk = () => (dispatch, getState) => {\r\n\tdispatch({\r\n\t\ttype: CLEAR_ERROR,\r\n\t});\r\n};\r\n\r\nexport const setPageAction: AppThunk = (page: number) => (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tdispatch({\r\n\t\ttype: SET_CURRENT_PAGE,\r\n\t\tpayload: {\r\n\t\t\t[activeFilter]: {\r\n\t\t\t\t...[activeFilter],\r\n\t\t\t\tpage,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n\r\nexport const getCollectionAction: AppThunk = () => (dispatch, getState) => {\r\n\tconst { activeFilter } = getState().searcher;\r\n\tconst {\r\n\t\tfilterQuery,\r\n\t\tpage,\r\n\t\tinputName,\r\n\t\tinputType,\r\n\t\tcollection,\r\n\t} = getState().searcher[activeFilter];\r\n\r\n\tconst query = gql`\r\n\t\t${filterQuery}\r\n\t`;\r\n\r\n\tdispatch({\r\n\t\ttype: GET_COLLECTION_PENDING,\r\n\t});\r\n\r\n\treturn client\r\n\t\t.query({\r\n\t\t\tquery,\r\n\t\t\tvariables: {\r\n\t\t\t\tname: inputName!.toLowerCase(),\r\n\t\t\t\ttype: inputType!.toLowerCase(),\r\n\t\t\t\tpage: page,\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then(({ data }) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_COLLECTION_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tfetching: false,\r\n\t\t\t\t\tcollection: {\r\n\t\t\t\t\t\t...collection,\r\n\t\t\t\t\t\t[activeFilter!]: data[activeFilter!].results,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_TOTAL_PAGES,\r\n\t\t\t\tpayload: data[activeFilter!].info.pages,\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_COLLECTION_ERROR,\r\n\t\t\t\tpayload: error,\r\n\t\t\t});\r\n\t\t});\r\n};\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}